$("link[chartjs='true']").length||$("head").append('<link chartjs="true" href="../Common/extensions/RadarChartWidget/ui/radarchart/jslibrary/Chart.min.css" rel="stylesheet">');$("script[chartjs='true']").length||$("body").append('<script chartjs="true" type="text/javascript" src="../Common/extensions/RadarChartWidget/ui/radarchart/jslibrary/Chart.min.js">\x3c/script>');Chart.platform.disableCSSInjection=!0;
TW.Runtime.Widgets.radarchart=function(){var e,c=this,d=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){return{supportsAutoResize:!0,needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-radarchart widget-radarchart-'+d+'">  <canvas class="widget-content widget-radarchart-canvas widget-radarchart-canvas-'+d+'">  </canvas></div>'};this.afterRender=function(){};this.resize=function(a,b){};this.serviceInvoked=function(a){if("Render"===
a){var b=c.getProperty("data"),f=c.getProperty("dataSettings");a=c.getProperty("debugMode");if(b&&b.rows.length){e&&e.destroy();b=this.setRadarData(b,f);f=this.setRadarOptions();var r=$(".widget-radarchart-canvas-"+d).get(0);a&&(console.log("RadarChart - radarData = "),console.log(b),console.log("RadarChart - radarOptions = "),console.log(f));e=new Chart(r,{type:"radar",data:b,options:f})}else e&&e.clear()}};this.setRadarData=function(a,b){for(var f=c.getProperty("pointRadius"),e=c.getProperty("pointBorderWidth"),
t=c.getProperty("pointHoverRadius"),g=a.isCompressed?a.dataShape.fieldDefinitions.dataset.alias:"dataset",d=a.isCompressed?a.dataShape.fieldDefinitions.field.alias:"field",u=a.isCompressed?a.dataShape.fieldDefinitions.value.alias:"value",k=[],l=[],h=0;h<a.rows.length;h++){var m=a.rows[h];-1===l.indexOf(m[d])&&l.push(m[d]);if(!k.find(a=>a.label===m[g])){var v=b.isCompressed?b.dataShape.fieldDefinitions.dataset.alias:"dataset",p=b?b.rows.find(a=>a[v]===m[g]):null,n={label:m[g],pointRadius:f,pointBorderWidth:e,
pointHoverRadius:t,data:[]};this.setSettings(n,p,"backgroundColor");this.setSettings(n,p,"borderColor");this.setSettings(n,p,"pointBackgroundColor");this.setSettings(n,p,"pointBorderColor");k.push(n)}}for(h=0;h<l.length;h++)for(var q=0;q<k.length;q++)b=a.rows.find(a=>a[d]===l[h]&&a[g]===k[q].label),k[q].data.push(b?b[u]:0);return{labels:l,datasets:k}};this.setSettings=function(a,b,c){b&&b[c]&&(a[c]=b[c])};this.setRadarOptions=function(){var a=c.getProperty("beginAtZero"),b=c.getProperty("minValue"),
f=c.getProperty("maxValue"),e=c.getProperty("stepSize"),d=c.getProperty("fontSize"),g=c.getProperty("legendPosition");return{layout:{padding:10},scale:{ticks:{beginAtZero:!!a,min:b,max:f,stepSize:e,fontSize:d},pointLabels:{fontSize:d},scaleLabel:{fontSize:d}},legend:{display:"NO_LEGEND"!==g,position:g,labels:{fontSize:d}}}};this.updateProperty=function(a){"data"===a.TargetProperty?this.setProperty("data",a.RawSinglePropertyValue):"dataSettings"===a.TargetProperty&&this.setProperty("dataSettings",
a.RawSinglePropertyValue)}};